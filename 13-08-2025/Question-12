Q: 12
// Title:
// L0 - Fixing Array and Object Operations

// Problem Statement:
// You have been provided with a script that is intended to handle a system for tracking book collections in a small library. The script uses arrays and objects to manage information but contains logical errors and syntax misuse, especially around ES6 features.

// Code Sample:

// const library = {

// books: [{ title: "The Hobbit", author: "J.R.R. Tolkien", year: 1937 }],

// addBook(book) {

// if (!book.title || !book.author || !book.year) {

// console.log("Book information is incomplete.");

// return;

// }
// this.books.push(book);

// },

// findBookByTitle(title) {

// return this.books.find(book => book.title === title);

// },

// removeBook(title) {

// const index = this.books.findIndex(book => book.title === title);

// if (index !== -1) {

// this.books.splice(index, 1);

// } else {

// console.log("Book not found.");

// } } };

// library.addBook({ author: "George Orwell", year: 1949 });

// console.log(library.books.length);

// Steps:

// Debug and improve the addBook method to ensure all books added are valid and fully specified.
// Read about the methods provided above in MDN
// Review and correct the output of the system based on operations performed.
// Refactor the code for better error handling and data integrity.


const library = {
  books: [
    { title: "The Hobbit", author: "J.R.R. Tolkien", year: 1937 }
  ],

  addBook(book) {
    const { title, author, year } = book;

    if (!title || !author || !year) {
      console.log("Book information is incomplete. Cannot add book.");
      return;
    }

    if (this.findBookByTitle(title)) {
      console.log(`Book titled "${title}" already exists.`);
      return;
    }

    this.books.push({ title, author, year });
    console.log(`Book titled "${title}" added successfully.`);
  },

  findBookByTitle(title) {
    return this.books.find(book => book.title === title);
  },

  removeBook(title) {
    const index = this.books.findIndex(book => book.title === title);

    if (index !== -1) {
      const removed = this.books.splice(index, 1);
      console.log(`Book titled "${removed[0].title}" removed successfully.`);
    } else {
      console.log("Book not found.");
    }
  }
};

// Testing the library system
library.addBook({ author: "George Orwell", year: 1949 }); // Incomplete info
console.log("Total books:", library.books.length);

library.addBook({ title: "1984", author: "George Orwell", year: 1949 });
console.log("Total books:", library.books.length);

library.addBook({ title: "1984", author: "George Orwell", year: 1949 }); // Duplicate
library.removeBook("The Hobbit");
console.log("Total books:", library.books.length);
